(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9404],{5091:function(e,t,s){Promise.resolve().then(s.bind(s,8403))},3793:function(e,t,s){"use strict";s.d(t,{N:function(){return n}});let a=e=>{try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch(e){return console.error("Error parsing JWT:",e),null}},n=()=>{let e=localStorage.getItem("token")||sessionStorage.getItem("token");if(!e)return"";try{let t=a(e);return(null==t?void 0:t.email)||""}catch(e){return console.error("Error decoding token:",e),""}}},8403:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),n=s(2265);s(6023);var r=s(4961),i=s(6648),l=s(3793),o=s(3580);s(4193);var c=s(6393);function d(){let[e,t]=(0,n.useState)([]),[s,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(null),[m,p]=(0,n.useState)({}),[f,x]=(0,n.useState)({}),[j,g]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/allposts");if(e.ok){let s=await e.json();t(s.posts),g(!1)}else o.Am.error("Failed to fetch posts")}catch(e){o.Am.error("Error fetching posts:",e)}})()},[]);let v=e=>{d(e.target.value)},b=async e=>{let t=(0,l.N)();if(!t){console.error("User email not found");return}try{(await fetch("/api/postanswer?postId=".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:s,userEmail:t})})).ok?(o.Am.success("Answer submitted successfully"),d("")):o.Am.error("Failed to submit answer")}catch(e){o.Am.error("Error submitting answer:",e)}},w=async e=>{try{let t=await fetch("/api/getpostanswers?postId=".concat(e));if(t.ok){let s=await t.json();p(t=>({...t,[e]:s.answers})),x(t=>({...t,[e]:!t[e]}))}else o.Am.error("Failed to fetch answers")}catch(e){o.Am.error("Error fetching answers:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{}),(0,a.jsxs)("div",{className:"blog_container",children:[(0,a.jsx)("h1",{children:"Blog Page"}),(0,a.jsx)("div",{className:"posts_container",children:(0,a.jsx)(c.y,{baseColor:"#202020",highlightColor:"#ddd",children:j?Array(8).fill().map((e,t)=>(0,a.jsxs)("div",{className:"post_card",children:[(0,a.jsx)(c.Z,{height:200,animation:"wave"}),(0,a.jsx)("h3",{children:(0,a.jsx)(c.Z,{width:"20vw",animation:"wave"})}),(0,a.jsx)("p",{children:(0,a.jsx)(c.Z,{count:3,animation:"wave"})})]},t)):e.map(e=>(0,a.jsxs)("div",{className:"post",children:[(0,a.jsxs)("div",{className:"post_header",children:[(0,a.jsxs)("div",{className:"blog_card_header",children:[(0,a.jsx)("h2",{children:e.title}),(0,a.jsxs)("span",{children:[e.userEmail.split("@")[0].slice(0,11),"X".repeat(10),"@",e.userEmail.split("@")[1].slice(-4)]})]}),(0,a.jsx)("p",{className:"post_date",children:new Date(e.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"numeric",year:"numeric"})})]}),(0,a.jsx)("div",{className:"post_image",children:(0,a.jsx)(i.default,{src:e.imageUrl,alt:e.title,width:800,height:400,layout:"responsive",objectFit:"cover"})}),(0,a.jsx)("div",{className:"post_content",children:(0,a.jsx)("p",{children:e.description})}),(0,a.jsxs)("div",{className:"post_footer",children:[u===e._id?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("textarea",{value:s,onChange:v,placeholder:"Write your answer here",rows:4}),(0,a.jsx)("button",{onClick:()=>b(e._id),children:"Submit"})]}):(0,a.jsx)("button",{className:"post_ans_btn",onClick:()=>h(e._id),children:"Post Answer"}),(0,a.jsx)("button",{className:"view_answers_btn",onClick:()=>w(e._id),children:f[e._id]?"Hide Answers":"View Answers"})]}),f[e._id]&&m[e._id]&&(0,a.jsx)("div",{className:"answers_list",children:m[e._id].map((t,s)=>(0,a.jsxs)("div",{className:"answer_item",children:[(0,a.jsx)("p",{className:"ans_user",children:(0,a.jsxs)("strong",{children:[t.userEmail.split("@")[0].slice(0,11),"x".repeat(10),"@",e.userEmail.split("@")[1].slice(-4)]})}),(0,a.jsx)("p",{className:"ans_text",children:t.text}),(0,a.jsx)("p",{className:"answer_date",children:new Date(t.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"numeric",year:"numeric"})})]},s))})]},e._id))})})]}),(0,a.jsx)(o.Ix,{})]})}s(3436)},4961:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),n=s(2265),r=s(6463),i=s(7138);function l(){let[e,t]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),d=(0,r.usePathname)(),u=(0,r.useRouter)();(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token")||sessionStorage.getItem("token");if(!e){c(null);return}try{let t=await fetch("/api/user-initial",{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();401===t.status?"Token expired. Please log in again."===s.message?(localStorage.removeItem("token"),sessionStorage.removeItem("token"),u.push("/login")):c(null):t.ok?c(s.userInitial):c(null)}catch(e){console.error("Error fetching user initial:",e),c(null)}})()},[u]);let h=e=>d===e?"active":"";return(0,a.jsxs)("nav",{className:"navbar",children:[(0,a.jsx)("div",{className:"navbar-logo",children:(0,a.jsx)(i.default,{href:"/home",children:"JSMaster"})}),(0,a.jsxs)("ul",{className:"navbar-links ".concat(e?"active":""),children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/home",className:h("/home"),children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/blog",className:h("/blog"),children:"Blog"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/community",className:h("/community"),children:"Community"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/contact",className:h("/contact"),children:"Contact Us"})}),(0,a.jsxs)("li",{className:"navbar-user",onClick:()=>{l(!s)},children:[(0,a.jsx)("span",{className:"user-initial",children:o}),(0,a.jsxs)("div",{className:"dropdown-menu ".concat(s?"open":""),children:[(0,a.jsx)(i.default,{href:"/profile",children:"Profile"}),(0,a.jsx)(i.default,{href:"/dashboard",children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),c(null),u.push("/login")},children:"Logout"})]})]})]}),(0,a.jsxs)("div",{className:"navbar-hamburger ".concat(e?"open":""),onClick:()=>{t(!e)},children:[(0,a.jsx)("span",{className:"bar"}),(0,a.jsx)("span",{className:"bar bar2"}),(0,a.jsx)("span",{className:"bar"})]})]})}s(56)},3436:function(){},6023:function(){},56:function(){},6393:function(e,t,s){"use strict";s.d(t,{Z:function(){return r},y:function(){return i}});var a=s(2265);let n=a.createContext({});function r(e){var t,s,r;let{count:i=1,wrapper:l,className:o,containerClassName:c,containerTestId:d,circle:u=!1,style:h,...m}=e,p=a.useContext(n),f={...m};for(let[e,t]of Object.entries(m))void 0===t&&delete f[e];let x={...p,...f,circle:u},j={...h,...function(e){let{baseColor:t,highlightColor:s,width:a,height:n,borderRadius:r,circle:i,direction:l,duration:o,enableAnimation:c=!0}=e,d={};return"rtl"===l&&(d["--animation-direction"]="reverse"),"number"==typeof o&&(d["--animation-duration"]="".concat(o,"s")),c||(d["--pseudo-element-display"]="none"),("string"==typeof a||"number"==typeof a)&&(d.width=a),("string"==typeof n||"number"==typeof n)&&(d.height=n),("string"==typeof r||"number"==typeof r)&&(d.borderRadius=r),i&&(d.borderRadius="50%"),void 0!==t&&(d["--base-color"]=t),void 0!==s&&(d["--highlight-color"]=s),d}(x)},g="react-loading-skeleton";o&&(g+=" ".concat(o));let v=null!==(t=x.inline)&&void 0!==t&&t,b=[],w=Math.ceil(i);for(let e=0;e<w;e++){let t=j;if(w>i&&e===w-1){let e=null!==(s=t.width)&&void 0!==s?s:"100%",a=i%1,n="number"==typeof e?e*a:"calc(".concat(e," * ").concat(a,")");t={...t,width:n}}let n=a.createElement("span",{className:g,style:t,key:e},"â€Œ");v?b.push(n):b.push(a.createElement(a.Fragment,{key:e},n,a.createElement("br",null)))}return a.createElement("span",{className:c,"data-testid":d,"aria-live":"polite","aria-busy":null===(r=x.enableAnimation)||void 0===r||r},l?b.map((e,t)=>a.createElement(l,{key:t},e)):b)}function i(e){let{children:t,...s}=e;return a.createElement(n.Provider,{value:s},t)}}},function(e){e.O(0,[2539,1404,7143,1141,2291,6648,127,2971,7023,1744],function(){return e(e.s=5091)}),_N_E=e.O()}]);