(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9926],{1577:function(e,t,a){Promise.resolve().then(a.bind(a,3272))},3272:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(7437),s=a(2265),i=a(9854);let n=(0,a(5236).ZF)({apiKey:"AIzaSyCLo3z-vVRDwKbN9z78njCHrdYFzkEUe3Y",authDomain:"jsmaster-e2950.firebaseapp.com",projectId:"jsmaster-e2950",storageBucket:"jsmaster-e2950.appspot.com",messagingSenderId:"743548453677",appId:"1:743548453677:web:f518d9532c4556dbcd09a4"}),o=(0,i.cF)(n);a(9070);var l=a(7942);function c(e){let{onClose:t,onAddPost:a}=e,[n,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[p,m]=(0,s.useState)(null),[h,f]=(0,s.useState)(!1),[g,j]=(0,s.useState)(""),[b,x]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=e=>e.replace(/-/g,"+").replace(/_/g,"/"),t=localStorage.getItem("token")||sessionStorage.getItem("token");if(t)try{let a=(t=>{let a=t.split(".");if(3!==a.length)throw Error("Invalid token format");return JSON.parse(atob(e(a[1])))})(t).email;j(a||"")}catch(e){console.error("Error decoding token:",e),j("")}else j("")},[]);let v=async e=>{if(e.preventDefault(),n&&d&&p&&g){f(!0);try{let e=(0,i.iH)(o,"images/".concat(p.name)),r=await (0,i.KV)(e,p),s=await (0,i.Jt)(r.ref),l=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:n,description:d,imageUrl:s,userEmail:g,userAnswer:b})});if(l.ok){let e=await l.json();a(e.post),t()}else console.error("Failed to save post data");f(!1),t()}catch(e){console.error("Error:",e),f(!1)}}};return(0,r.jsxs)("div",{className:"modal_overlay",children:[(0,r.jsxs)("div",{className:"modal_content",children:[(0,r.jsx)("button",{className:"modal_close",onClick:t,children:"X"}),(0,r.jsx)("h2",{children:"Create New Post"}),(0,r.jsxs)("form",{onSubmit:v,children:[(0,r.jsx)("label",{htmlFor:"title",children:"Title"}),(0,r.jsx)("input",{type:"text",id:"title",value:n,placeholder:"Enter your issue",onChange:e=>c(e.target.value),required:!0}),(0,r.jsx)("label",{htmlFor:"description",children:"Description"}),(0,r.jsx)("textarea",{id:"description",value:d,onChange:e=>u(e.target.value),required:!0,placeholder:"Explain Your issues"}),(0,r.jsx)("label",{htmlFor:"image",children:"Image"}),(0,r.jsx)("input",{type:"file",id:"image",accept:"image/*",onChange:e=>m(e.target.files[0]),required:!0}),(0,r.jsx)("button",{type:"submit",disabled:h,children:h?"Uploading...":"Submit"})]})]}),h&&(0,r.jsx)(l.default,{})]})}},7942:function(e,t,a){"use strict";a.r(t);var r=a(7437);a(2265),a(8554),t.default=()=>(0,r.jsx)("div",{className:"loader",children:(0,r.jsx)("div",{className:"spinner"})})},9070:function(){},8554:function(){}},function(e){e.O(0,[6038,3190,5623,2971,7023,1744],function(){return e(e.s=1577)}),_N_E=e.O()}]);