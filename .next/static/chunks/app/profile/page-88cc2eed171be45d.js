(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{1585:function(e,r,t){Promise.resolve().then(t.bind(t,1077))},3793:function(e,r,t){"use strict";t.d(r,{N:function(){return n}});let a=e=>{try{let r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(r).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(t)}catch(e){return console.error("Error parsing JWT:",e),null}},n=()=>{let e=localStorage.getItem("token")||sessionStorage.getItem("token");if(!e)return"";try{let r=a(e);return(null==r?void 0:r.email)||""}catch(e){return console.error("Error decoding token:",e),""}}},4961:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var a=t(7437),n=t(2265),s=t(6463),l=t(7138);function i(){let[e,r]=(0,n.useState)(!1),[t,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),u=(0,s.usePathname)(),f=(0,s.useRouter)();(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token")||sessionStorage.getItem("token");if(!e){c(null);return}try{let r=await fetch("/api/user-initial",{headers:{Authorization:"Bearer ".concat(e)}}),t=await r.json();401===r.status?"Token expired. Please log in again."===t.message?(localStorage.removeItem("token"),sessionStorage.removeItem("token"),f.push("/login")):c(null):r.ok?c(t.userInitial):c(null)}catch(e){console.error("Error fetching user initial:",e),c(null)}})()},[f]);let d=e=>u===e?"active":"";return(0,a.jsxs)("nav",{className:"navbar",children:[(0,a.jsx)("div",{className:"navbar-logo",children:(0,a.jsx)(l.default,{href:"/home",children:"JSMaster"})}),(0,a.jsxs)("ul",{className:"navbar-links ".concat(e?"active":""),children:[(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/home",className:d("/home"),children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/blog",className:d("/blog"),children:"Blog"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/community",className:d("/community"),children:"Community"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/contact",className:d("/contact"),children:"Contact Us"})}),(0,a.jsxs)("li",{className:"navbar-user",onClick:()=>{i(!t)},children:[(0,a.jsx)("span",{className:"user-initial",children:o}),(0,a.jsxs)("div",{className:"dropdown-menu ".concat(t?"open":""),children:[(0,a.jsx)(l.default,{href:"/profile",children:"Profile"}),(0,a.jsx)(l.default,{href:"/dashboard",children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),c(null),f.push("/login")},children:"Logout"})]})]})]}),(0,a.jsxs)("div",{className:"navbar-hamburger ".concat(e?"open":""),onClick:()=>{r(!e)},children:[(0,a.jsx)("span",{className:"bar"}),(0,a.jsx)("span",{className:"bar bar2"}),(0,a.jsx)("span",{className:"bar"})]})]})}t(56)},1077:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return o}});var a=t(7437),n=t(2265),s=t(6648);t(7222);var l=t(4961),i=t(3793);function o(){let[e,r]=(0,n.useState)({username:"",email:"",profilePicture:"/assets/default_profile.jfif",phone:""}),[t,o]=(0,n.useState)(!1),[c,u]=(0,n.useState)({...e});(0,n.useEffect)(()=>{(async()=>{let t=(0,i.N)();if(!t){console.error("User email not found");return}try{let a=await fetch("/api/profile?email=".concat(t)),n=await a.json();a.ok?(r({...e,...n,profilePicture:n.profilePicture||"/assets/default_profile.jfif"}),u({...c,...n,profilePicture:n.profilePicture||"/assets/default_profile.jfif"})):console.error(n.message)}catch(e){console.error("Error fetching user data:",e)}})()},[]);let f=e=>{let{name:r,value:t}=e.target;u({...c,[r]:t})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{}),(0,a.jsx)("div",{className:"profile_container",children:(0,a.jsxs)("div",{className:"profile_header",children:[(0,a.jsx)("div",{className:"profile_picture",children:(0,a.jsx)(s.default,{src:e.profilePicture,alt:"Profile Picture",width:150,height:150,className:"profile_img",unoptimized:!0})}),(0,a.jsxs)("div",{className:"profile_info",children:[t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",name:"username",value:c.username,onChange:f,className:"profile_input"}),(0,a.jsx)("input",{name:"email",value:c.email,onChange:f,className:"profile_input"}),(0,a.jsx)("input",{name:"phone",value:c.phone,onChange:f,className:"profile_input"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{children:e.username}),(0,a.jsx)("p",{children:e.email}),(0,a.jsx)("p",{children:e.phone}),(0,a.jsx)("p",{children:e.gender})]}),(0,a.jsx)("button",{onClick:t?()=>{r(c),o(!1)}:()=>{o(!t)},className:"profile_button",children:t?"Save":"Edit Profile"})]})]})})]})}},56:function(){},7222:function(){}},function(e){e.O(0,[8248,1404,2291,6648,2971,7023,1744],function(){return e(e.s=1585)}),_N_E=e.O()}]);